
{% extends "base-incubaciones.tpl.html" %}

{% if user.is_authenticated %}
    {% block barraderecha %}
        {% include 'menusuperior/menulogueado.tpl.html' %}
    {% endblock %}

    {% block busqueda %}
        {% include 'menusuperior/barrabusqueda.tpl.html'%}
    {% endblock %}

{% endif %}


{% block sliderPagina %}Historial de Milestones{% endblock %}

{% block contenido %}

    {% block registrarinstitucion %}
        {% include 'menusuperior/registrarinstitucion.tpl.html' %}
    {% endblock %}

    <style type="text/css">
        .milestone:hover {
        background-color:#F5F5F5;
        }

        .milestone {
            color: black;
            padding: 15px;

        }

        .active{
            background-color:#FBF0EE;
        }
        .sub:link {
            text-decoration:none;  
        }
    }
    </style>
    <div class="container">
        <div class="col-md-3 col-sm-12" style="padding-left: 0px;">
            <div class="col-md-12 col-sm-6" style="padding-right: 0px;padding-left: 0px;">
                <!-- COMIENZA  Panel de los consultores -->                        
                <div class="panel-body" style=" overflow-y: scroll; height:700px;padding:0px;">
                 {% if listaMilestone %}
                    {% for milestone in listaMilestone %}
                      {% if milestone.fk_incubada.fk_oferta == incubada.fk_oferta %}
                          <a class="listmilestone" id="{{milestone.id_milestone}}" value="{{milestone.id_milestone}}" href="#">
                              <div class="media milestone active">
                                  <div>
                                    <h4>{{milestone.fecha_creacion.date}}</h4>
                                    <p>{{milestone.requerimientos|truncatewords:20}}<br></p>
                                    <p>{{milestone.id_milestone}}</p>
                                  </div>
                              </div>
                          </a>
                      {%endif%}
                     {% endfor %}               
                </div>

                {% else %}
                <div class="note">
                No existen milestones en la incubada
                </div>
              {% endif %}
            </div>   
        </div> 
        <script type="text/javascript">
          $(function () {
            $('.listmilestone').click(function(){
              //obterner el id milestone seleccionado
              var idmilestone=$(this).attr('id');
              $('#conetidoMilestone').ready(mostrarMilestone);
                function mostrarMilestone() {
                  $.ajax({
                    data: {
                      'milestoneId': idmilestone
                    },
                    type: 'get',
                    url: '/ContenidoMilestone/',
                    success: function (data) {
                      $('#conetidoMilestone').html(data)
                    }
                  });
                }
            });

          });
        </script>

        

      <div class="col-md-9 col-sm-12" id="conetidoMilestone">
          {% csrf_token %}
      <!--Se carga el contenido de  milestone -->
    
      </div>
</div>
{% endblock %}



